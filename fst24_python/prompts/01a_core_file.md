Implement the Fst24File class with these requirements:

1. Core functionality:
   - File handling with context manager
   - Thread-safe operations
   - Support for both XDF and RSF formats

2. Implementation details:
   - Use ctypes for C bindings
   - Support environment variable FST_OPTIONS
   - Implement proper resource cleanup 
